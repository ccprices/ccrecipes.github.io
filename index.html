<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"> 
	<link rel="stylesheet" href="style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Crafting Recipes</title>
	<link rel="icon" href="images/steel_hammer.png">
</head>
<body>
	<div id="loader"><img src="logo.png"><p>Loading...</p></div>
	<div class="navbar">
		<button class="less" onclick="closeNavbar()"><img src="images/less.png"></button>
		<div class="border"></div>
		<form onsubmit="multiply();return false">
			<input type="text" maxlength="4" onblur="multiply()" class="quantitybar" id="quantityInput" placeholder="Quantity">
		</form>
		<input type="text" class="searchbar" id="searchInput" onkeyup="searchRecipe()" placeholder="Search for Recipe..">
		<div class="links">
			<a href="#basiccr" title="Basic Crafting Recipes"><img src="images/anvil.png"></a>
			<a href="#crtools" title="Crafting Recipes with Tools"><img src="images/workbench.png"></a>
			<a href="#coloring" title="Coloring Items with Dye"><img src="images/any_color_dye.png"></a>
			<a href="#cooking" title="Cooking"><img src="images/stove.png"></a>
			<a href="#cutting" title="Cut-O-Matik"><img src="images/cut-o-matik_5000!.png"></a>
			<a href="#forging" title="Forging Items"><img src="images/forge.png"></a>
			<a href="#extraction" title="Ingredient Extraction"><img src="images/extractor.png"></a>
			<a href="#distill" title="Distillation"><img src="images/distiller.png"></a>
			<a href="#eastereggs" title="Easter Pow Gift Crafting"><img src="images/eggs/easter_pow_gift.png"></a>
			<a href="#candies" title="Ultimate Candy Crafting"><img src="images/candies/ultimate_candy.png"></a>
		</div>
	</div>
	<button class="more" onclick="openNavbar()"><img src="images/more.png"></button>
	<div id="table">
		
	</div>

	<div class="clouds"></div>
	<footer>Made by <a href="https://forums2.cubiccastles.com/index.php?p=/profile/27/Kewbin">Kewbin</a></footer>
	
</body>

<script src="https://unpkg.com/lazysizes@4.0.1/lazysizes.js"></script>
<script src="jquery.js"></script>

<script>

	function searchRecipe() {
		var input, filter, table, tr, td, i, txtValue, pins, currentpin, tablediv;
		input = document.getElementById("searchInput");
		filter = input.value.toUpperCase();
		table = document.getElementById("recipeTable");
		tablediv = document.getElementById("table");
		tr = table.getElementsByClassName("tr");
		pins = document.getElementsByClassName("pin");
		tablediv.scrollTop = 0;
		for (i = 0; i < tr.length; i++) {
			tds = tr[i].getElementsByTagName("td");
			td = tds[tds.length - 1];
			if (td) {
				txtValue = td.textContent || td.innerText;
				if (txtValue.toUpperCase().indexOf(filter) == -1 && pins[i].checked == false) {
					tr[i].style.display = "none";
					tr[i].style.visibility = "hidden";
				} else {
					tr[i].style.display = "";
					tr[i].style.visibility = "visible";
				}
			}
		}
		$('tr:visible:odd').css({'background-color': 'rgba(75, 123, 236,.4)'});
		$('tr:visible:even').css({'background-color': 'transparent'});
	}

	function hideOnes() {
		var quant, i;
		quant = document.getElementsByClassName("quantity");
		for (i=0; i< quant.length; i++) {
			if (quant[i].textContent == "1x") {
				quant[i].style.display = "none";
			}
			else {
				quant[i].style.display = "";
			}
		}

	}

	function multiply() {
		var inputNumber,quant,origQuant,strnumber,number,i,a,multiplied,multiquan,number1,number2,multiplied1,mulitplied2,multistring;
		inputNumber = document.getElementById("quantityInput");
		quant = document.getElementsByClassName("quantity");
		origQuant = document.getElementsByClassName("OriginalValue");
		for (i=0; i< quant.length; i++) {
			if (isNaN(inputNumber.value) || inputNumber.value == "") {
				a = 1
			}
			else {
				a = inputNumber.value;
			}
			if (origQuant[i].textContent.includes("-") == true) {
				multiquan = origQuant[i].textContent.split("-");
				number1 = multiquan[0];
				number2 = multiquan[1];
				multiplied1 = parseInt(number1) * parseInt(a);
				multiplied2 = parseInt(number2) * parseInt(a);
				quant[i].textContent = String(multiplied1) + "-" + String(multiplied2) + "x";
			}
			else {
				strnumber = origQuant[i].textContent;
				number = parseInt(strnumber);
				multiplied = number * parseInt(a);
				quant[i].textContent = String(multiplied) + "x";
			}
		}
		hideOnes();
	}
	function openNavbar() {
		var navbars
		navbars = document.getElementsByClassName("navbar");
		navbars[0].style.left = "0px";
	}
	function closeNavbar() {
		var navbars
		navbars = document.getElementsByClassName("navbar");
		navbars[0].style.left = "-350px";
	}
	$(document).ready(function(){
		$('#table').load('recipes.html #recipeTable', function(){
			setTimeout(function(){$("#loader").css({"opacity":"0"});},2000);
			setTimeout(function(){$("#loader").css({"display":"none"});},2500);
			window.onload = searchRecipe();
			window.onload = hideOnes();
			window.onload = multiply();
		});
	})
</script>
</html>